{% extends 'student/base.html' %}
{% load static %}
{% block site_title %}
Studentss
{% endblock site_title %}
{% block content %}
<section class="content">

    <!-- Default box -->
    <div class="card card-primary">
        <div class="card-header">
            <h3 class="card-title">Exams</h3>

            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                    <i class="fas fa-minus"></i>
                </button>
                <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
<<<<<<< HEAD
        <div class="card-body p-0 row">
=======
        <div class="card-body row">
>>>>>>> 3d5395e85b633390da0ae0435a9450549c1e32b7
            <div class="form-group col-md-6">
                <label> &nbsp; Select Exam</label>
                    <select type="" onchange="getPaper()"name="exam_name"  id="exam" class="form-control" required>
                      <option disabled>Select Exam</option>
                      {% for exams_list in exams_list %}
                      <option value="{{exams_list.id}}">{{exams_list.name}}</option>
                      {% endfor %}}
                    </select>
            </div>
<<<<<<< HEAD
            <div class="col-md-6">
                
            </div>
        </div>
=======
            <div class="form-group col-md-6">
                <label> &nbsp; Select Paper</label>
                <select type="" name="paper_name" onchange="getMarks()"  id="paper" class="form-control" required>
                    <option disabled>Select Exam</option>
                </select>  
            </div>
        </div>
        <div class="col-12" id="marks">

        </div >
>>>>>>> 3d5395e85b633390da0ae0435a9450549c1e32b7
        <!-- /.card-body -->
    </div>
    <!-- /.card -->

</section>
<<<<<<< HEAD
    <!-- Default box -->
    <!--<div class="card">
        <div class="card-header">
            <h3 class="card-title">Check Result</h3>

            <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                    <i class="fas fa-minus"></i>
                </button>
                <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
       <div class="card-body p-0">
            <table class="table table-striped projects">
               <div class="row"> 
                <div class="form-group col-md-6">
                    <label> &nbsp; Select Exam</label>
                    <select type="" onchange="getPaper()"name="exam_name"  id="exam" class="form-control" required>
                      <option disabled>Select Exam</option>
                      {% for exams_list in exams_list %}
                      <option value="{{exams_list.id}}">{{exams_list.name}}</option>
                      {% endfor %}}
                    </select>
                </div>
                <div class="form-group col-md-6">
                    <label> &nbsp; Select Paper</label>
                    <select type="" name="paper_name" onchange="getMarks()"  id="paper" class="form-control" required>
                        <option disabled>Select Exam</option>
                      
                    </select>   
                </div>
                <div id="marks">

                </div>
               </div> 
            </table>
        </div>
        
    </div> -->
    <!-- /.card -->
=======
>>>>>>> 3d5395e85b633390da0ae0435a9450549c1e32b7

<script>
    function getPaper()
    {
        xhr = new XMLHttpRequest;
        var exam = document.getElementById("exam");
        var paper = document.getElementById("paper");
        xhr.open("GET","/student/ajax/get-papers/"+exam.value);
        
        xhr.onreadystatechange = function()
        {
         
            if(xhr.readyState == 4 )
            {
                js = xhr.responseText;
                const obj = JSON.parse(js)["data"];
               
                //console.log(obj);
                var html = "";
                for(var i=0;i<obj.length;i++)
                {
                    html += "<option value='"+obj[i].id+"'>"+obj[i].number+"</option>";
                }
                paper.innerHTML = html;
            }
        }
    xhr.send(); 
    }
    function getMarks()
    {
        xhr = new XMLHttpRequest;
        var paper = document.getElementById("paper");
        var marks = document.getElementById("marks");
        xhr.open("GET","/student/ajax/get-marks/"+paper.value);
        
        xhr.onreadystatechange = function()
        {
         
            if(xhr.readyState == 4 )
            {
                js = xhr.responseText;
                const obj = JSON.parse(js)["data"];
                console.log(obj);
                var html = "";
                for(var i=0;i<obj.length;i++)
                {
                    html += "<option value='"+obj[i].id+"'>"+obj[i].marks+"</option>";
                }
                marks.innerHTML = html;
            }
        }
    xhr.send(); 
    }

</script>
{% endblock content %}